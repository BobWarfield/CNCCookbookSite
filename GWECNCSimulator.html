<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- #BeginTemplate "/Templates/CNCGWEDocPage.dwt" --><!-- DW6 -->

<head>

<!-- #BeginEditable "doctitle" --> 

<title>G-Wizard Editor:  CNC Simulator and Backplotter</title>

<style type="text/css">
<!--
.BodyText1 {	font-family: Arial, Helvetica, sans-serif;
}
.BodyText1 {}
.BodyText1 {	font-family: Arial, Helvetica, sans-serif;
}
.BodyText3 {}
.BodyText3 {font-family: Arial, Helvetica, sans-serif;
}
-->
</style>
<!-- #EndEditable -->

<meta name=viewport content="width=device-width, initial-scale=1">

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<link rel="shortcut icon" href="http://www.cnccookbook.com/img/CNCFavIcon.ico" />
 
<!-- Borrowed from the Wordpress blog for consistency -->
<!-- <link rel="stylesheet" type="text/css" media="all" href="http://s3690.at2.pressdns.com/wp-content/themes/cnccookbookv1/style.css" /> -->
<link href="http://www.cnccookbook.com/css/styles.css" rel="stylesheet" type="text/css" />
<link href="http://www.cnccookbook.com/css/ddsmoothmenu.css" rel="stylesheet" type="text/css" />

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript" language="JavaScript"></script>
<script type="text/javascript" src="js/jquery.form.js"></script>
<script type="text/javascript" src="js/ddsmoothmenu.js"></script>

<!-- End Borrowed from Wordpress blog. -->

<script type="text/javascript" src="/js/multitouch_simple.min.js"></script>

<style type="text/css">

<!--

.BlogDate {  font-family: Arial, Helvetica, sans-serif; color: #999999}

.BlogTitle {  font-family: Arial, Helvetica, sans-serif; color: #339933; font-size: 14pt}

.PageNav {  font-family: Arial, Helvetica, sans-serif; color: #FFFFFF}
.BodyText {
	font-family: Arial, Helvetica, sans-serif;
}


-->

</style>

<!-- Place this tag in your head or just before your close body tag -->
<script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script>

<script language="JavaScript">
<!--
function MM_preloadImages() { //v3.0

  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();

    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)

    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}

}

// Javascript for the software menu popup...

var timeout	= 500;
var closetimer	= 0;
var ddmenuitem	= 0;

// open hidden layer
function mopen(id)
{	
	// cancel close timer
	mcancelclosetime();

	// close old layer
	if(ddmenuitem) ddmenuitem.style.visibility = 'hidden';

	// get new layer and show it
	ddmenuitem = document.getElementById(id);
	ddmenuitem.style.visibility = 'visible';

}
// close showed layer
function mclose()
{
	if(ddmenuitem) ddmenuitem.style.visibility = 'hidden';
}

// go close timer
function mclosetime()
{
	closetimer = window.setTimeout(mclose, timeout);
}

// cancel close timer
function mcancelclosetime()
{
	if(closetimer)
	{
		window.clearTimeout(closetimer);
		closetimer = null;
	}
}

// close layer when click-out
document.onclick = mclose;
//-->
</script>

<!-- SumoMe Listbuilder Email Exit Intent -->
<script src="//load.sumome.com/" data-sumo-site-id="b857129b7814fcf0d1bba9c69fdb926fce887afe773d938445cf28022394ec4a" async></script>

<!-- Place this tag in the <head> of your document -->
<link href="https://plus.google.com/106834255444857094594" rel="author" />
<style type="text/css">
.BodyText1 {            font-family: Arial, Helvetica, sans-serif;
}
</style>
</head>



<body bgcolor="#FFFFFF" onLoad="MM_preloadImages('file:///D|/My%20WebSites/Templates/SoftwareDn.jpg')">

<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-N4WJTH"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N4WJTH');</script>
<!-- End Google Tag Manager -->

<script type="text/javascript">
  multitouch();
</script>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr></tr>
<tr>
  <td height="68" colspan="4" valign="middle" bordercolor="0" class="Tagline">
  
    <table width="100%" border="0" cellpadding="0" cellspacing="0">
    	<tr>
       	  <td  bgcolor="#000000" style="padding-top:5px" colspan="2">
                <!-- BEGIN MAIN MENU -->
                <div id="mainMenu" class="ddsmoothmenu">
                    <ul id="menu-mainmenu" class="menu">
                        <li id="menu-item-600" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-600"><a href="http://www.cnccookbook.com/CCCNCSoftware.html">&nbsp;&nbsp;PRODUCTS</a>
                        </li>
                        <li id="menu-item-45" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-45"><a href="http://www.cnccookbook.com/CCAbout.htm">ABOUT</a>
                        <li id="menu-item-925" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-925"><a href="http://blog.cnccookbook.com/category/blog">BLOG</a>
                        </li>
                      <li id="menu-item-601" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-601"><a href="http://www.cnccookbook.com/OnlineCNCTrainingCoursesGuides.htm">COOKBOOKS</a>
                        </li>
                        <li id="menu-item-43" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-43"><a href="http://www.cnccookbook.com/CCDIYCNC.htm">DIY CNC</a>
                        </li>
                        <li id="menu-item-41" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-41"><a href="http://www.cnccookbook.com/CCCNCProjects.htm">PROJECTS</a>
                        </li>
                        <li id="menu-item-41" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-41"><a href="http://blog.cnccookbook.com/questions/">QUESTIONX</a>
                        </li>
                        </li>
                        </li>
                    </ul>
                </div>
                <!-- END MAIN MENU -->
            </td>
        </tr>
        <tr>
          <td align="left"  valign="middle" bordercolor="0" bgcolor="#f0f0f0" class="Tagline">
                <div style="float: left;">
                  <a href="http://www.cnccookbook.com/index.htm"><img src="images/LogoBitmap30High.jpg" alt="CNCCookbook: Software and Information for Macihnists" />
                  </a>
                </div>
          </td>
          <td align="left"  valign="middle" bordercolor="0" bgcolor="#f0f0f0" class="Tagline">
          	<ul>
            	<li><a class="trialButton green-hollow" href="http://www.cnccookbook.com/CCCNCSoftware.html?utm_source=cnccookbook&utm_medium=banner&utm_campaign=FreeTrialsBtn">&nbsp;&nbsp;Free Trials&nbsp;&nbsp;</a></li>
	          	<li><a class="trialButton green-hollow" href="CCHelpDesk.html"><strong>&nbsp;&nbsp;HELP&nbsp;&nbsp;</strong></a></li>
          		<li><a href="CNCSiteSearch.html"><img src="img/Art/Search32.jpg" width="32" height="26" alt="CNCCookbook Site Search" style="vertical-align:middle;"/></a></li>
            </ul>
          </td>
        </tr>
    </table>
  
  </td>
</tr>
<tr class="LeftNav">
  <td width="146" height="1624" rowspan="2" align="center" valign="top" bgcolor="#f0f0f0">

  <table width="100%" border="0" cellpadding="0" cellspacing="0">

<tr class="LeftNav">
  <td width="231" height="1624" rowspan="2" align="center" valign="top" bgcolor="#f0f0f0"><table width="65%"  border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td><div align="center">
        <p><a href="http://www.cnccookbook.com/FeedSpeedsCalculator/CCGWizard.html"><img src="img/Ads/GWAd05152011.gif" width="120" height="90" alt="G-Wizard Machinist's Calculator" longdesc="http://www.cnccookbook.com/FeedSpeedsCalculator/CCGWizard.html"></a></p>
        <p><a href="http://www.cnccookbook.com/CCCNCMillFeedsSpeeds.htm"> <img src="img/Ads/FeedsSpeedsAd.jpg" width="120" height="69" alt="Feeds and Speeds Cookbook"></a></p>
      </div></td>
    </tr>
  </table>
    <p>
      <!-- Place this tag where you want the +1 button to render -->
        <g:plusone></g:plusone>
    </p>
    <p align="center"><b><font face="Arial, Helvetica, sans-serif" size="+1" color="#66CC00">GW Editor 
      User Guide</font></b></p>
    <p align="center" class="Tagline1"><a href="GWEUIntro.html" class="BodyText"><strong>GWE Video University</strong></a>    </p>
    <p align="center" class="BodyText"><strong><a href="GWEOverview.html">Getting Started</a></strong></p>
    <p align="center" class="BodyText"><a href="GWEHowToArticles.html"><strong>How-To Articles</strong></a></p>
    <p align="center" class="BodyText"><strong><a href="GWESetup.html">Setup</a></strong></p>
    <p align="center" class="BodyText"><a href="http://www.cnccookbook.com/GWECommands.html"><strong>Commands</strong></a></p>
    <p align="center" class="BodyText"><a href="http://www.cnccookbook.com/GWEKeyboard.html"><strong>Keyboard</strong></a></p>
    <p align="center" class="BodyText"><strong><a href="GWERevisions.html">Revisions</a></strong></p>
    <p align="center" class="BodyText"><a href="http://www.cnccookbook.com/GWECNCSimulator.html"><strong>CNC Simulator</strong></a></p>
    <p align="center" class="BodyText"><strong><a href="GWEWizards.html">Wizards</a></strong></p>
    <p align="center" class="BodyText"><strong><a href="GWETools.html">Tool Data</a></strong></p>
    <p align="center" class="BodyText"><a href="GWETips.html"><strong>Tips</strong></a></p>
    <p align="center" class="BodyText"><a href="GWEPostList.html"><strong>Post List</strong></a></p>
    <p align="center" class="BodyText"><a href="GWECustomPosts.html"><strong>Customizing Posts</strong></a></p>
    <p align="center" class="Tagline1">&nbsp;</p>
    <p align="center" class="Tagline1"><strong><a href="GWCCOverview.html">GW Conversational CNC</a></strong></p>
    <p align="center" class="Tagline1">&nbsp;</p>
    <p align="center" class="Tagline1"><a href="http://www.cnccookbook.com/CCCNCGCodeRef.html"><strong>Mill G-Codes</strong></a></p>
    <p align="center" class="Tagline1"><a href="http://www.cnccookbook.com/CCCNCGCodeRefTurn.html"><strong>Lathe G-Codes</strong></a></p>
    <p align="center" class="Tagline1">&nbsp;</p>
    <p align="center" class="Tagline1"><a href="GWESampleFiles.html"><strong>Sample G-Code Files</strong></a></p>
    <p align="center" class="Tagline1">&nbsp;</p>
    <p align="center" class="Tagline1"><strong><a href="http://www.cnccookbook.com/GWETips.html">GWE Tips</a></strong></p>
    <p align="center">&nbsp;</p>
    <p align="center"><strong><a href="GWEChangeLog.html" class="BodyText">GWE Change Log</a></strong></p>
    <p align="center" class="BodyText"><a href="http://www.cnccookbook.com/GWizard/GWEInstall.html"><strong>GWE Install</strong></a></p>
    <p align="center">&nbsp;</p>
    <p align="center"><b><font face="Arial, Helvetica, sans-serif"><a href="GWTrouble.htm">Troubleshooting</a></font></b></p>
    <p align="center">&nbsp;</p>
    <p align="center"><a href="http://www.cnccookbook.proboards.com/index.cgi" class="BodyText"><strong>User's Club</strong></a></p>
<p>
  <!-- Place this tag where you want the +1 button to render -->
  <p>
  <g:plusone></g:plusone>
  </p>
    <!-- AddThis Button BEGIN -->
    <script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
    <a class="addthis_button" href="http://www.addthis.com/bookmark.php?v=250&amp;username=cnccookbook"><img src="http://s7.addthis.com/static/btn/v2/lg-share-en.gif" width="125" height="16" alt="Bookmark and Share" style="border:0"/></a>
    <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#username=cnccookbook"></script>
    <!-- AddThis Button END -->
</p>
<script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    gaTrack: true,
    gaId: 'UA-1060932-2'
  }, 'google_translate_element');
}
  </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</p>
</td>
</tr>
<tr>
  <td colspan="7" align="left" valign="top" bgcolor="#FFFFFF">
  <div id="centerContainer">
  <!-- #BeginEditable "Body" -->
      <p><font color="#339933" size="+4">G-Wizard 
      Editor: CNC Simulator and Backplotter</font></p>
      <p class="BodyText">The G-Wizard Editor's CNC Simulator is the portion of the software that understands how to execute g-code and can present the backplot as well as debugging information.   It is operational in some form or fashion all the time, as the backplot is always available.  However, when we refer to the &quot;Simulator&quot;, we generally mean to refer to the running of the CNC Simulator step by step. We call that &quot;Simulator Mode&quot; or &quot;Debugger Mode&quot;, because it is intended to help you understand and debug the execution of your g-code. </p>
      <p class="BodyText">When that mode is operational, the GWE screen will display simulator information directly below the backplot, like this:</p>
      <blockquote>
        <p align="center" class="BodyText"><img src="img/GWizardE/Docs/SimScreen.jpg" width="1024" height="721" alt="GWE CNC Simulator Mode"></p>
        <p align="center" class="BodyText">G-Wizard G-Code Editor Simulator Mode: A G-Code Debugger...</p>
        <p align="left" class="BlogTitle">Backplot Options</p>
        <p align="left" class="BodyText">Before we get into Simulator Mode, let's describe the Backplot Options that are available.  They're accessed from the Backplot menu, and there are two tabs on the popup.  The first is for the &quot;Show&quot; options that control which elements are displayed in the Backplot:</p>
        <p align="center" class="BodyText"><img src="img/GWizardE/Docs/GWEBackplotShowOptions.jpg" width="503" height="435" alt="Backplot Show Options"></p>
        <p align="center" class="BodyText">Backplot Show Options...</p>
        <p align="left" class="BodyText">You have the ability to control visibility of the following by turning the check boxes on or off:</p>
        <blockquote>
          <p align="left" class="BodyText">- Grid:  The grid that provides a reference may be turned on or off.</p>
          <p align="left" class="BodyText">- Tool:  The simulated 3D tool and holder may be turned on or off.</p>
          <p align="left" class="BodyText">-  Trident:  The trident that shows which direction X, Y, and Z grow larger (positive) may be turned on or off, and it can be displayed in the lower left of the backplot or always at work 0, 0, 0.</p>
          <p align="left" class="BodyText">-  Endpoints:   This options displays the endpoints of each segment with a marker so it is easier to see where segments begin or end.</p>
          <p align="left" class="BodyText">-  Rapids Moves:  This option toggles whether G0 moves are shown or not.</p>
          <p align="left" class="BodyText">-  Feed Moves:  This option toggles whether non-G0 moves are displayed, and if so, controls the line weight used to draw them.</p>
          <p align="left" class="BodyText">- Feed Extent Box:  GWE will show an extent box when you attempt to rotate or pan a complex backplot.  This option controls whether the extent box should be shown all the time.</p>
          <p align="left" class="BodyText">- Reference Position Moves:  This option controls whether reference moves, triggered by G27 to g30, will be plotted.</p>
        </blockquote>
        <p align="left" class="BodyText">The Refresh tab contains the  options that control how often the Backplot is replotted:</p>
        <p align="center" class="BodyText"><img src="img/GWizardE/Docs/GWEBackplotRefreshOptions.jpg" width="503" height="423" alt="Backplot refresh options"></p>
        <p align="center" class="BodyText">Backplot Refresh Options...</p>
        <p align="left" class="BodyText">You can set the maximum file size that will auto-refresh after any change.   Files larger than this size require manual refresh by pressing the refresh button on the Toolbar or by menu pick.  You can also press the F9 key to cause a refresh.   The checkbox allows you to turn off auto-refresh even for files smaller than the maximum size.</p>
        <p align="left" class="BlogTitle">Options for Backplotting Individual Tools</p>
        <p align="left" class="BodyText">The visibility and color of backplot for individual tools may be controlled via the Tool tab:</p>
        <p align="center" class="BodyText"><img src="img/GWizardE/Docs/GWEToolBackplot.jpg" width="800" height="636" alt="Tool Backplot"></p>
        <p align="center" class="BodyText">The visibility and color of individual tools may be controlled from the Tools tab...</p>
        <p align="left" class="BlogTitle">Starting CNC Simulator Mode</p>
        <p align="left" class="BodyText">The easiest way to transition from normal editing mode to CNC Simulator Mode is to press the rewind button on the Simulator Control Buttons on the toolbar:</p>
        <p align="center" class="BodyText"><img src="img/GWizardE/Docs/SimTransport.jpg" width="423" height="69" alt="G-Code SImulator Control Buttons"></p>
        <p align="center" class="BodyText">Simulator Control Buttons...</p>
        <p align="left" class="BodyText">In Edit Mode, G-Wizard places  a subtle underline that appears by the rewind to remind you this is how to start CNC Simulator Mode:</p>
        <p align="center" class="BodyText"><img src="img/GWizardE/Docs/SimUnderline.jpg" width="271" height="50"></p>
        <p align="center" class="BodyText">Note the underline of the Rewind button to remind you how to start CNC Simulator Mode...</p>
        <p align="left" class="BodyText">Take a minute to run your mouse cursor over each button. There is a tool tip that pops up to describe the button's function:</p>
        <p align="left" class="BodyText">- Rewind: Rewind to the beginning (first block) of the g-code program.</p>
        <p align="left" class="BodyText">- Cycle Start: Start executing g-code.  If Single Block is in effect, each press executes 1 block.</p>
        <p align="left" class="BodyText">- Cycle Start 5 Step:  Same as Cycle Start, except if Single Block is in effect, each press executes 5 blocks.</p>
        <p align="left" class="BodyText">- Feed Hold:   Stop execution at the conclusion of the current block. You may restart by pressing Cycle Start.</p>
        <p align="left" class="BodyText">- Stop:    Stop the program.</p>
        <p align="left" class="BodyText">- Single Block:  Activates Single Block mode where execution is paused after each block as though Feed Hold were pressed.   </p>
        <p align="left" class="BodyText">As you can see, these controls are the same as you'll find on most <a href="MTCNCPanels.htm">machine control panels</a>.  They're your tools for controlling the execution of the g-code so you can see how the program works.</p>
        <p align="left" class="BodyText">The Tortoise, Hare, and Percent between them control the g-code playback speed. Click the Tortoise to slow way down, or click the Hare to speed up to 100%.   The numeric speed control accepts a number from 1 to 100% execution speed. GWE will remember the last speed selected when you exit.        </p>
        <p align="left" class="BlogTitle">The Simulator Instrument Cluster</p>
        <p align="left" class="BodyText">GWE provides an instrument cluster directly under the backplot that provides information about what the g-code is doing in addition to what you see on the backplot:</p>
        <p align="center" class="BodyText"><img src="img/GWizardE/Docs/SimCluster.jpg" width="1114" height="323"></p>
        <p align="center" class="BodyText">The Simulator Instrument Cluster...</p>
        <p align="left" class="BodyText">This is similar to the information provided by your machine's controller.  You get to see the coordinates on the various axes, as well as the spindle's status, the feedrate, the current tool, how long the program is predicted to take to execute to this point, and the status of coolant.  In addition, you will see information about what modes are active.  For example, in the screen shot above, we can see several:</p>
        <p align="left" class="BodyText">-  G00: The motion mode is G00, so the machine will move at rapids speed when commanded to move.</p>
        <p align="left" class="BodyText">-  G64:  Another aspect of the motion mode is whether the machine moves at G64 &quot;Best Speed&quot; or G60 &quot;Exact Stop&quot;.</p>
        <p align="left" class="BodyText">- G17: The currently selected plane for arcs and canned cycles is G17, the XY plane.</p>
        <p align="left" class="BodyText">- G20: The currently selected units are Inches.</p>
        <p align="left" class="BodyText">- etc.</p>
        <p align="left" class="BlogTitle">Simulator Options Popup</p>
        <p align="left" class="BodyText">The Simulator Options Popup is accessible either via the Simulator Menu or by right clicking on the Simulator Control Buttons:</p>
        <p align="center" class="BodyText"><img src="img/GWizardE/Docs/SimOptions.jpg" width="514" height="315" alt="G-Code Simulator Options"></p>
        <p align="left" class="BodyText">The Simulator Options Popup controls what the 5-Step button on the Toolbar does when clicked (you can also use the Ctrl+Space keyboard shortcut to trigger the 5-Step button).    By default, 5-Step executes 5 blocks.  Using the Simulator Options, you can change how many steps are taken with each press to be more or less than 5.</p>
        <p align="left" class="BodyText">Simulator Options also lets you control the Infinite Loop Threshold. This tells how many times the same block has to be executed before GW Editor declares it is likely in an infinite loop. If you want to turn this checking off, just set the value to zero.</p>
        <p align="left" class="BodyText"><strong>What Else Can We Do In CNC Simulator Mode?</strong></p>
        <p align="left" class="BodyText">There is a lot of other information available to you on the GWE screen:</p>
        <p align="left" class="BodyText">-  The G-Code panel shows the <em>next</em> line to execute with a highlight.  The line that just executed is the line <em>preceeding</em> the highlight. You can scroll the G-Code panel to look around, but if you click in the panel to try to edit you'll be asked whether you want to stop the CNC Simulator. You can't edit the program while it is being simulated.</p>
        <p align="left" class="BodyText">-  There is a hint for the highlighted line (the <em>next</em> line to execute, not the one that <em>just</em> executed!) below the Instrument Cluster.  You can also open the Hints tab and watch execution line by line there in order to help your understanding.  Hints will frequently contain useful information not obvious in the g-code such as the coordinates of the center of an arc.</p>
        <p align="left" class="BlogTitle">Exiting Simulator Mode</p>
        <p align="left" class="BodyText">To exit simulator mode, simply click the Stop button on the Controls, or click the G-Code Edit panel and answer &quot;Yes&quot; you'd like to stop the simulation.</p>
        <p class="BlogTitle">Adding Infinite Loop Detection and Macro Stepping to G-Wizard CNC Editor</p>
        <p align="left" class="BodyText3">I got an inquiry from a <a href="CCGWizardE.html">G-Wizard G-Code Editor</a> user wanting to know if I could help diagnose a problem he was having.   It seems he was trying to figure out why a program that had been output by his BobCAD CAM software was getting an error message out of Mach3.   I his post wasn't set up quite right for the Mach3 <a href="CCCNCGCodeDialects.htm">g-code dialect</a> at first, but his description of the problem was intriguing and sounded deeper than that, so I volunteered to try to help.   He had run the code through the Predator Editor/Simulator that comes with BobCAD, but it saw no errors.   Mach3 on the other hand was seemingly never finishing the backplot and complaining cryptically that &quot;Return called with no sub in effect&quot;:</p>
        <p align="center" class="BodyText3"><img src="img/GWizardE/Docs/Mach3InfLoop.jpg" width="800" height="614" alt="Mach3 in an infinite loop"></p>
        <p align="center" class="BodyText3">Mach3 executing g-code that infinite loops...</p>
        <p align="left" class="BodyText3">I hadn't had the pleasure of seeing this behavior from Mach, so I thought I'd learn something knew by helping diagnose the problem.  I also suspected I could make GWE better in the process, and no sooner did I load this machinist's program than GWE promptly locked up and started acting hung.  Excellent--that which does not kill us, makes us stronger!</p>
        <p align="left" class="BodyText3">It didn't take long looking at the program in Notepad to see what was happening.  Looks like BobCAD wants to create a subprogram for each machining operation and then call them one after the other at the top.   It can make reading the code less than obvious, but it is not that uncommon a practice.  Unfortunately, for some reason, the software forgot to put a program stop after it was done calling the subprograms for each operation.  This caused execution to just fall through the bottom of the main program and start executing the very first subprogram all over again.  The subprogram wasn't expecting this, since it was designed to have been directly called with an M98 (if you're not following these g-codes, don't worry, I will explain them in our <a href="CCCNCGCodeCourse.htm">G-Code tutorial</a>).   When the subprogram gets done, it uses an M99 to return to the block right after the M98.  Therein lies the problem.  If it was never called by M98, there is no return location. </p>
        <p align="left" class="BodyText3">Most g-code dialects, when faces with an M99 and no M98 having called will simply start executing the very first line of g-code at the top of the program again.  It's not the worst choice they could've made, but I would've preferred an error (or alarm as the CNC world likes to call them) be issued.   Instead, we get a situation where this particular program was going round and round doing everything over and over again. </p>
        <p align="left" class="BodyText3">Now that Mach3 message makes a bit more sense.  We did indeed issue a &quot;Return&quot; (M99) without a &quot;Sub&quot; (M98) in effect, and so we are indeed &quot;looping&quot;.   In fact, we're engaged in what the software world calls an &quot;Infinite Loop&quot;.  Absent the operator stopping the program, it will never stop of its own accord.  The fix is easy--just add an M02 in the right place to stop before falling through to the subprogram.</p>
        <p align="left" class="BodyText3">Here is some sample code that demonstrates the problem:</p>
        <p align="center" class="BodyText3"><img src="img/GWizardE/Docs/InfLoopCode.jpg" width="500" height="286" alt="Infinite loop g-code"></p>
        <p align="center" class="BodyText3">An infinite loop in g-code...</p>
        <p align="left" class="BodyText3">This code just draws a little 1&quot; square, then it calls the subprogram at line N600. Execution would jump down to the sub and run until it hits the return &quot;M99&quot; at line N1100.  Right below the sub call I have commented out the line that should've been there to stop further execution--see line N800.  We needed an M02 right there to stop the program.  Since there is nothing there but a comment, the g-code falls on through N800 and starts executing the subprogram below.  DOH!</p>
        <p align="left" class="BodyText3"><strong>How about a little help finding these things, G-Wizard?</strong></p>
        <p align="left" class="BodyText3">Well why not help, it isn't that hard.   Two capabilities were added to the GW CNC Editor--the ability to detect and automatically stop infinite loops, and a simulator enhancement that makes it easy to step through and see what all those M97/98/99, G65, and GOTO (if you run Fanuc Macros) commands are doing.</p>
        <p align="left" class="BodyText3">First, the infinite loop detection.  Since we can't get a loop unless the code, um <em>loops</em>, GWE keeps track of every block that causes execution to deviate from just going to the next block below.  It keeps a count of how many times the deviation is made.  In an infinite loop, one or more of those deviations (let's just call them &quot;Goto's&quot; because that's what they are) will happen an infinite number of times.   Now I don't know about you, but I'm not getting any younger, and I don't want to wait that long to see if I have an infinite loop. Therefore, GWE has a &quot;goto limit&quot; defined, and if any particular goto exceeds that limit, it issues a warning message and stops the program.  Here is the message for the sample above:</p>
        <p align="center" class="BodyText3"><img src="img/GWizardE/Docs/InfLoopPopup.jpg" width="800" height="300" alt="G-Code Infinite Loop Warning"></p>
        <p align="center" class="BodyText3">The infinite loop warning tells exactly where the trouble is occuring and what the suspicious behavior is...</p>
        <p align="left" class="BodyText3">As you can see, the warning tells exactly where the trouble is (line 13), and what the suspicious behavior is--line 13 issued a goto 5 times, which is the default goto limit.   Now does that guarantee an infinite loop? No, it doesn't.  You could easily have written code that calls the same routine more than 5 times intentionally.   However, we have to pick a limit somewhere to work with, and that's one that won't let the loop get too carried away before we intervene and have a look at it.  If we are running a program where we expect to run more than 5 times, we can use the Simulator Options menu to change the limit:</p>
        <p align="center" class="BodyText3"><img src="img/GWizardE/Docs/SimOptions.jpg" width="410" height="315" alt="Simulator Options"></p>
        <p align="center" class="BodyText3">Simulator Options...</p>
        <p align="left" class="BodyText3">In addition to the popup, we add an appropriate Hint to help diagnose what's going on and draw attention to the line in question. You can see line 13 is lit with the red &quot;ERROR&quot; indicator.  Here is the Hint for that line:</p>
        <p align="center" class="BodyText3"><img src="img/GWizardE/Docs/InfLoopHint.jpg" width="572" height="148" alt="Infinite loop hint"></p>
        <p align="center" class="BodyText3">Hint for a possible infinite loop...</p>
        <p align="left" class="BodyText3">BTW, can you see how that hint makes it a whole lot easier to understand what all is going on there than just starting at &quot;N1100 M99&quot;?   Hints are designed to refresh your memory, teach you what the g-codes mean, and provide information that is otherwise hard to come by for deeper understanding.  Isn't that just what we need from a CNC Simulator?</p>
        <p align="left" class="BodyText3">Okay, that makes it pretty easy to tell what's going on when there is an infinite loop.  But, understanding what's going on when a program is jumping and looping all over the place is still not easy.    As I was stepping through this BobCAD-generated code, I realized we need a way to navigate that focuses on the goto's.    Perhaps you've seen or even tried out our fancy &quot;5 Step&quot; function.   It does so much more than the normal &quot;Step&quot; or &quot;Single Blocking&quot; we see in most simulators. If you right click the &quot;5 Step&quot; toolbar button (or you can use the Simulator menu), you'll get the Simulator Options--refer to the screenshot above.   &quot;5 Step&quot; gives us the ability to:</p>
        <p align="left" class="BodyText3">- Step by any number of blocks, the default being &quot;5&quot;, hence the name. </p>
        <p align="left" class="BodyText3">- Step to the next rapid move. This is likely a retract that lets you get past a bunch of feedrate moves you're not interested in.</p>
        <p align="left" class="BodyText3">- Step the the next Dwell (G04). This is a sneaky one. Dwells typically don't affect a program much.  So you can stick one in and use it as a bookmark.  Use &quot;5 Step&quot; to jump to your next &quot;bookmark&quot;. </p>
        <p align="left" class="BodyText3">- Step to next toolchange (M06). Always a popular time saver.</p>
        <p align="left" class="BodyText3">- Step to the next subprogram op or GOTO.  This is our new addition.</p>
        <p align="left" class="BodyText3">Stepping to a goto makes navigating through these subprograms fast and easy.   If you're going to be working on a g-code program with a lot of goto-activity, I'd recommend you get a flavor for the high level workings by using the &quot;Step to the next GOTO&quot; option first.   That'll let you breeze through, see who is calling who, and understand the high level structure of the g-code.  You'll also see the effects of each subprogram unfolding on the backplot.   Take a note or two on what you want to revisit and dig deeper into.  Drop some G04 Dwells, switch to stepping to dwells, and you'll be able to focus on those areas.</p>
        <p align="left" class="BlogTitle">What to read next</p>
        <p align="left" class="BodyText">Let's check out GWE's <a href="GWEWizards.html">g-code wizards</a>; they help you get the g-code write the first time.</p>
        <p align="left" class="BodyText">&nbsp;</p>
      </blockquote>
<p align="left">&nbsp;</p>
    <!-- #EndEditable -->
  </div>
  </td>
</tr>
<!-- Begin Site Map -->
<tr>
  <td width="231" valign="top" bgcolor="#f0f0f0" ><p class="BodyText">&nbsp;</p></td>
  <td width="312" valign="top" bgcolor="#f0f0f0" ><p class="BodyText"><strong><a href="http://www.cnccookbook.com/CCCNCSoftware.html"></a></strong><strong><a href="http://www.cnccookbook.com/index.htm">Home</a></strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
    <p class="BodyText1">&nbsp;</p>
    <p class="BodyText1"><strong><a href="http://www.cnccookbook.com/CCCNCSoftware.html">Software</a></strong> </p>
    <p class="BodyText1"> &nbsp;&nbsp;<a href="http://www.cnccookbook.com/FeedSpeedsCalculator/CCGWizard.html">GW Calculator</a> </p>
    <p class="BodyText1">&nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCGWizardE.html">GW Editor</a> </p>
    <p class="BodyText1">&nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCGearoticGearDesignSoftware.html">Gearotic</a> </p>
    <p class="BodyText1"> &nbsp;&nbsp;<a href="CCMeshCamEasyCAMSoftware.html">MeshCAM</a></p>
    <p class="BodyText1"><strong>&nbsp;&nbsp;</strong><a href="http://www.cnccookbook.com/CCGWizardConversationalCNC.html">Conversational CNC</a><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong> </p>
    <p class="BodyText1"><strong><a href="http://blog.cnccookbook.com/cheapskate-resources-coupon-codes-sales-and-smokin-deals/">&nbsp;&nbsp;Deals and Steals</a></strong></p></td>
  <td width="245" valign="top" bgcolor="#f0f0f0" ><p class="BodyText1"><strong><a href="http://blog.cnccookbook.com/category/blog/">Blog</a></strong> </p>
    <p class="BodyText1">&nbsp;&nbsp;<a href="http://blog.cnccookbook.com/category/software/">Software</a></p>
    <p class="BodyText1"> &nbsp;&nbsp;<a href="http://blog.cnccookbook.com/category/feedsandspeeds/">Feeds and Speeds</a><br>
    </p>
    <p class="BodyText1">&nbsp;&nbsp;<a href="http://blog.cnccookbook.com/category/gcode/">G-Code </a></p>
    <p class="BodyText1">&nbsp;&nbsp;</p>
    <p class="BodyText1"><strong><a href="http://www.cnccookbook.com/Calculators/CNCCalculatorCharts.htm">Calculators and References</a></strong></p>
    <p class="BodyText1"> &nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCCNCGCodeRef.html">G-Code List</a></p>
    <p class="BodyText1"><strong></strong> </p>
    <p class="BodyText">&nbsp;</p>
    <p class="BodyText">&nbsp;</p>
    <p class="BodyText"></p>
    <p>&nbsp;</p></td>
  <td width="378" valign="top" bgcolor="#f0f0f0" ><p class="BodyText1"><strong><a href="http://www.cnccookbook.com/OnlineCNCTrainingCoursesGuides.htm">Cookbooks</a></strong> </p>
    <p class="BodyText1"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong><a href="http://www.cnccookbook.com/CCCNCMillFeedsSpeeds.htm">Feeds and Speeds</a> </p>
    <p class="BodyText1"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong><a href="http://www.cnccookbook.com/CCCNCGCodeCourse.htm">G-Code Tutorial</a> </p>
    <p class="BodyText1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCCNCMachiningManufacturing.htm">CNC Machining &amp; Manufacturing</a> </p>
    <p class="BodyText1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="GD&T/GD&TTutorialHome.html">GD&amp;T</a></p>
    <p class="BodyText1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.cnccookbook.com/GD&T/GD&TSymbols.html">GD&amp;T Symbols</a></p>
    <p class="BodyText1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCLeanManufacturingPrinciples.htm">Lean Manufacturing</a> </p>
    <p class="BodyText1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCCostEstimatingMachiningManufacturing.htm">Cost Estimating Software</a></p>
    <p class="BodyText1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCDictionary.htm">CNC Dictionary</a> </p>    <p class="BodyText">&nbsp;</p></td>
  <td width="268" valign="top" bgcolor="#f0f0f0" ><p class="BodyText1"><strong><a href="http://www.cnccookbook.com/CCDIYCNCBeginners.html">CNC Beginners Start Here</a></strong></p>
    <p class="BodyText1">&nbsp;</p>
    <p class="BodyText1"><strong><a href="http://www.cnccookbook.com/CCDIYCNC.htm">DIY CNC</a></strong> </p>
    <p class="BodyText1">&nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCCNCProjects.htm">CNC Projects</a><br>
    </p>
    <p class="BodyText1">&nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCHomeMachineShops.html">Hall of Fame</a></p>
    <p><span class="BodyText1">&nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCResources.htm">Resources</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
    <p class="BodyText">&nbsp;</p>
    <p><span class="BodyText">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></td>
  <td width="284" valign="top" bgcolor="#f0f0f0" ><p class="BodyText1"><strong><a href="http://www.cnccookbook.com/CCAbout.htm">About</a></strong></p>
    <p class="BodyText1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.cnccookbook.com/CCPrivacy.htm">Privacy Policy</a></p>    <p class="BodyText">&nbsp;</p></td>
  <td width="658" valign="top" bgcolor="#f0f0f0" ><p class="BodyText">&nbsp;</p></td>
  </tr>
<tr>
  <td colspan="5" bgcolor="#f0f0f0" >
      <!-- Place this tag where you want the badge to render -->
    <a href="https://plus.google.com/106834255444857094594?prsrc=3" style="text-decoration:none;"><img src="https://ssl.gstatic.com/images/icons/gplus-32.png" alt="" style="border:0;width:32px;height:32px;"/></a></strong></td>
  <td colspan="2" bgcolor="#f0f0f0" ><div align="left">
    <table width="100%" border="0">
      <tr>
        <td>&nbsp;</td>
        <td><div align="right">All material &copy; 2010-2016, <a href="mailto:sales@cnccookbook.com"><b>CNCCookbook, Inc.</b></a></div></td>
        </tr>
      </table>
  </div></td>
</tr>
<!-- End Site Map -->

</table>
</body>

<!-- #EndTemplate --></html>

